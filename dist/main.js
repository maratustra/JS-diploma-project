(()=>{"use strict";const e=class{constructor({sliderItemsClass:e,leftArrowClass:t,rightArrowClass:s,highResolutionSlides:l,lowResolutionSlides:i}){this.activeSlideClass="active-slide",this.highResolutionMode="high resolution mode",this.lowResolutionMode="low resolution mode",this.slidesList=document.querySelectorAll(`.${e}`),this.leftArrow=document.querySelector(`.${t}`),this.rightArrow=document.querySelector(`.${s}`),this.highResolutionSlides=l,this.lowResolutionSlides=i,this.currentResolutionMode=null,this.maxSlidesToShow=null,this.currentActiveSlide=0,this.checkCurrentResolution(),this.listenToEvents()}checkCurrentResolution(){document.documentElement.clientWidth>576?this.currentResolutionMode!=this.highResolutionMode&&(this.currentResolutionMode=this.highResolutionMode,this.maxSlidesToShow=this.highResolutionSlides,this.showSlides()):this.currentResolutionMode!=this.lowResolutionMode&&(this.currentResolutionMode=this.lowResolutionMode,this.maxSlidesToShow=this.lowResolutionSlides,this.showSlides())}listenToEvents(){this.leftArrow.addEventListener("click",(()=>this.showPrevSlide())),this.rightArrow.addEventListener("click",(()=>this.showNextSlide())),window.addEventListener("resize",(()=>this.checkCurrentResolution()))}showSlides(){for(const e of this.slidesList)e.classList.remove(this.activeSlideClass);const e=Math.min(this.currentActiveSlide+this.maxSlidesToShow,this.slidesList.length);for(let t=this.currentActiveSlide;t<e;t++)this.slidesList[t].classList.add(this.activeSlideClass);this.showHideArrows()}showNextSlide(e=!1){this.lastActiveSlide()<this.slidesList.length-1?(this.slidesList[this.currentActiveSlide].classList.remove(this.activeSlideClass),this.currentActiveSlide++,this.slidesList[this.lastActiveSlide()].classList.add(this.activeSlideClass),this.showHideArrows()):e&&(this.currentActiveSlide=0,this.showSlides())}showPrevSlide(){this.currentActiveSlide>0&&(this.slidesList[this.lastActiveSlide()].classList.remove(this.activeSlideClass),this.currentActiveSlide--,this.slidesList[this.currentActiveSlide].classList.add(this.activeSlideClass),this.showHideArrows())}showHideArrows(){switch(this.currentActiveSlide){case 0:this.leftArrow.style.opacity=0,this.rightArrow.style.opacity=1;break;case this.slidesList.length-this.maxSlidesToShow:this.rightArrow.style.opacity=0,this.leftArrow.style.opacity=1;break;default:this.leftArrow.style.opacity=1,this.rightArrow.style.opacity=1}}lastActiveSlide(){return this.currentActiveSlide+this.maxSlidesToShow-1}};new class{constructor({orderCallBtnClass:e,orderCallMeasurerBtnsClass:t,modalWindowClass:s,modalMeasurerClass:l,closeModalWindowClass:i,closeModalMeasurerClass:o,overlayClass:r}){this.orderCallBtn=document.querySelector(`.${e}`),this.orderCallMeasurerBtns=document.querySelectorAll(`.${t}`),this.modalWindow=document.querySelector(`.${s}`),this.modalMeasurer=document.querySelector(`.${l}`),this.closeModalWindow=document.querySelector(`.${i}`),this.closeModalMeasurer=document.querySelector(`.${o}`),this.overlay=document.querySelector(`.${r}`),this.eventListeners()}eventListeners(){this.orderCallBtn.addEventListener("click",(()=>{this.overlay.style.display="block",this.modalWindow.style.display="block"})),this.orderCallMeasurerBtns.forEach((e=>{e.addEventListener("click",(()=>{this.overlay.style.display="block",this.modalMeasurer.style.display="block"}))})),this.closeModalWindow.addEventListener("click",(()=>{this.modalWindow.style.display="none",this.overlay.style.display="none"})),this.closeModalMeasurer.addEventListener("click",(()=>{this.modalMeasurer.style.display="none",this.overlay.style.display="none"}))}}({orderCallBtnClass:"btn-block.fancyboxModal",orderCallMeasurerBtnsClass:"btn-sm.fancyboxModal",modalWindowClass:"header-modal--opened",modalMeasurerClass:"services-modal--opened",closeModalWindowClass:"header-modal__close",closeModalMeasurerClass:"services-modal__close",overlayClass:"overlay"}),new e({sliderItemsClass:"service-slide",leftArrowClass:"services__arrow--left",rightArrowClass:"services__arrow--right",highResolutionSlides:2,lowResolutionSlides:1}),new e({sliderItemsClass:"benefits__item",leftArrowClass:"benefits__arrow--left",rightArrowClass:"benefits__arrow--right",highResolutionSlides:3,lowResolutionSlides:1}),new class{constructor({deadline:e,timerDaysQuerySelector:t,timerHoursQuerySelector:s,timerMinutesQuerySelector:l,timerSecondsQuerySelector:i}){this.timerDays=document.querySelectorAll(t),this.timerHours=document.querySelectorAll(s),this.timerMinutes=document.querySelectorAll(l),this.timerSeconds=document.querySelectorAll(i),this.deadline=e,this.idInterval=setInterval((()=>this.updateTimer()),1e3)}getTimeRemaining(){const e=(new Date(this.deadline).getTime()-(new Date).getTime())/1e3,t=Math.floor(e/60/60/24);return{timeRemaining:e,daysTillDeadline:t,hoursTillDeadline:Math.floor(e/60/60-24*t),minutesTillDeadline:Math.floor(e/60%60),secondsTillDeadline:Math.floor(e%60)}}updateTimer(){let{timeRemaining:e,daysTillDeadline:t,hoursTillDeadline:s,minutesTillDeadline:l,secondsTillDeadline:i}=this.getTimeRemaining();this.timerDays.forEach((e=>{e.textContent=this.addZeroBeforeNumber(t)})),this.timerHours.forEach((e=>{e.textContent=this.addZeroBeforeNumber(s)})),this.timerMinutes.forEach((e=>{e.textContent=this.addZeroBeforeNumber(l)})),this.timerSeconds.forEach((e=>{e.textContent=this.addZeroBeforeNumber(i)})),e<=0&&(clearInterval(this.idInterval),this.timerDays.forEach((e=>{e.textContent="00"})),this.timerHours.forEach((e=>{e.textContent="00"})),this.timerMinutes.forEach((e=>{e.textContent="00"})),this.timerSeconds.forEach((e=>{e.textContent="00"})))}addZeroBeforeNumber(e){return String(e).length>1?e:("00"+e).slice(-2)}}({deadline:"31 december 2021",timerDaysQuerySelector:"div.count_1 span",timerHoursQuerySelector:"div.count_2 span",timerMinutesQuerySelector:"div.count_3 span",timerSecondsQuerySelector:"div.count_4 span"}),new class{constructor({scrollBtnClass:e,blockID:t}){this.scrollBtnClass=document.querySelector(`.${e}`),this.blockID=document.querySelector(`#${t}`),this.scrollBtnClass.style.display="none",this.eventListeners()}eventListeners(){this.scrollBtnClass.addEventListener("click",(()=>this.smoothScrollMenu())),window.addEventListener("scroll",(()=>this.showScrollBtn()))}smoothScrollMenu(){this.blockID.scrollIntoView({behavior:"smooth",block:"start"})}showScrollBtn(){pageYOffset<document.documentElement.clientHeight?this.scrollBtnClass.style.display="none":this.scrollBtnClass.style.display="block"}}({scrollBtnClass:"smooth-scroll",blockID:"header"}),document.body.classList.contains("balkony")&&new class{constructor({selectorsBlockClass:e,calcTypeId:t,calcTypeMaterialId:s,calcSquareId:l,calcTotalId:i}){this.selectorsBlock=document.querySelector(`.${e}`),this.calcTypeOfBalcony=document.querySelector(`#${t}`),this.calcTypeOfMaterial=document.querySelector(`#${s}`),this.calcSquareOfBalcony=document.querySelector(`#${l}`),this.calcTotalPrice=document.querySelector(`#${i}`),this.calcTypeOfMateriaValue=1,this.eventListeners()}calculate(){let e=0;e=100*this.calcSquareOfBalconyValue*this.calcTypeOfBalconyValue*this.calcTypeOfMateriaValue,this.showResult(e)}showResult(e){this.calcTotalPrice.value=e}showError(e){const t=document.createElement("div");t.classList.add("error"),t.style.color="red",t.textContent="Это поле является обязательным для заполнения",e.parentNode.append(t)}maybeHideError(e){e.parentNode.lastElementChild.classList.contains("error")&&e.parentNode.lastElementChild.remove()}eventListeners(){this.selectorsBlock.addEventListener("change",(e=>{switch(e.target){case this.calcTypeOfBalcony:this.maybeHideError(this.calcTypeOfBalcony),e.target.value>0?this.calcTypeOfBalconyValue=+e.target.value:(this.calcTypeOfBalconyValue=0,this.showError(this.calcTypeOfBalcony));break;case this.calcTypeOfMaterial:e.target.value>0&&(this.calcTypeOfMateriaValue=+e.target.value)}this.calculate()})),this.calcSquareOfBalcony.addEventListener("change",(e=>{this.maybeHideError(this.calcSquareOfBalcony),e.target.value>0?this.calcSquareOfBalconyValue=+e.target.value:""===e.target.value&&(this.calcSquareOfBalconyValue=0,this.showError(this.calcSquareOfBalcony)),this.calculate()}))}}({selectorsBlockClass:"calc-row",calcTypeId:"calc-type",calcTypeMaterialId:"calc-type-material",calcSquareId:"calc-input",calcTotalId:"calc-total"}),new class{constructor({formsBlocksTag:e,userNameInputAttr:t,phoneNumberInputAttr:s}){this.formsBlocks=document.querySelectorAll(`${e}`),this.userNameInputs=document.querySelectorAll(`${t}`),this.phoneNumberInputs=document.querySelectorAll(`${s}`),this.eventListeners()}userValidation(e){/[^а-яa-z\s-]+$/gi.test(e.value)?e.value=e.value.replace(/[^а-яА-Я\s-]+$/g,""):/([\s-])\1/gi.test(e.value)?e.value=e.value.replace(/([\s-])\1/g,""):/-[а-яёa-z]/gi.test(e.value)?e.value=e.value.replace(/-[а-яёa-z]/gi,(e=>e.toUpperCase())):e.value.length>0&&(e.value=e.value.split(" ").map((e=>e.length>0?e[0].toUpperCase()+e.substring(1):"")).join(" "))}phoneValidation(e){/[^\d+]/g.test(e.value)?e.value=e.value.replace(/[^\d+]/g,""):e.value.length>=11&&(e.value=e.value.trim().replace(/\s+/g," "))}eventListeners(){this.formsBlocks.forEach((()=>{this.userNameInputs.forEach((e=>{e.addEventListener("input",(e=>{this.userValidation(e.target)}))})),this.phoneNumberInputs.forEach((e=>{e.addEventListener("input",(e=>{this.phoneValidation(e.target)}))}))}))}}({formsBlocksTag:"form",userNameInputAttr:'[name="fio"]',phoneNumberInputAttr:'[name="phone"]'});const t={url:"https://jsonplaceholder.typicode.com/posts",formsBlocksTag:"form"};document.body.classList.contains("balkony")&&(t.calcTotalSum=[{type:"input",id:"calc-total"}]),new class{constructor({url:e,formsBlocksTag:t,calcTotalSum:s=[]}){this.url=e,this.formsBlocks=document.querySelectorAll(t),this.calcTotalSum=s,this.statusBlock=document.createElement("div"),this.errorText="Ошибка!",this.successText="Спасибо, мы обязательно с вами свяжемся",this.statusBlock.style.cssText="color: orange; font-size: 15px;",this.eventListeners()}sendData(e){return fetch(this.url,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}submitForm(e){const t=new FormData(e),s={};t.forEach(((e,t)=>{s[t]=e})),this.calcTotalSum.forEach((e=>{const t=document.querySelector(`#${e.id}`);switch(e.type){case"block":s[e.id]=t.textContent;break;case"input":s[e.id]=t.value}})),this.sendData(s).then((t=>{console.log(t),this.statusBlock.textContent=this.successText,e.append(this.statusBlock)})).catch((t=>{this.statusBlock.textContent=errorText,this.statusBlock.style.color="red",e.append(this.statusBlock)}))}eventListeners(){try{this.formsBlocks.forEach((e=>{e.addEventListener("submit",(t=>{t.preventDefault(),t.target.checkValidity()?(this.submitForm(t.target),setTimeout((()=>e.reset()),1500)):(statusBlock.textContent="Введите данные в правильном формате",e.append(statusBlock))}))}))}catch(e){console.log(e.message)}}}(t),new class{constructor({pictureOverlaysClass:e,imagesClass:t,modalCloseBtnClass:s,imagesGalleryBlockId:l,globalOverlay:i}){this.pictureOverlay=document.querySelectorAll(`.${e}`),this.imagesToZoom=document.querySelectorAll(`.${t}`),this.galleryBlock=document.querySelector(`#${l}`),this.overlay=document.querySelector(`.${i}`),this.modalCloseBtn=s,this.eventListeners()}showZoomedImage(e){const t=e;this.createZoomedImageElement(t),this.galleryBlock.append(this.modalWindow),this.overlay.style.display="block"}createZoomedImageElement(e){this.modalWindow=document.createElement("div"),this.modalWindow.classList.add("modal-zoom"),this.modalWindow.innerHTML=`\n    <button class=${this.modalCloseBtn}>X</button>\n    <div>\n      <img src="${e}" alt="" style="width: 100%; height: 80vh"/>\n    </div>\n    `}eventListeners(){this.imagesToZoom.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.showZoomedImage(e.target.parentNode.href)}))})),this.galleryBlock.addEventListener("click",(e=>{e.target.closest(`.${this.modalCloseBtn}`)&&(this.overlay.style.display="none",this.modalWindow.style.display="none")}))}}({pictureOverlaysClass:"document-overlay",imagesClass:"sertificate-document",modalCloseBtnClass:"lightbox-close_btn",imagesGalleryBlockId:"documents",globalOverlay:"overlay"}),new class{constructor({url:e,commentsContainerClass:t,commentsItemClass:s}){this.url=e,this.commentsContainer=document.querySelector(`.${t}`),this.commentsContainer.innerHTML="",this.commentsItemClass=s,this.fetchCommentsData(e).then((e=>{this.createListOfComments(e.comments),this.showComments()}))}fetchCommentsData(e){return fetch(e).then((e=>e.json())).catch((e=>console.log("error",e)))}buildCommentHtml(e){const t=document.createElement("div");return t.classList.add("review-margin-bottom","row",`${this.commentsItemClass}`),e.id%2!=0?t.innerHTML=`\n    \t\t<div class="col-xs-3 col-sm-2">\n    \t\t\t<div class="review-user">\n    \t\t\t\t<img src="images/users/${e.image}" alt="" class="img-responsive avatar">\n    \t\t\t</div>\n    \t\t</div>\n    \t\t<div class="col-xs-9 col-sm-9">\n    \t\t\t<div class="review-inner review-green review-arrow review-arrow-left">\n    \t\t\t\t<p class="text-normal">${e.author}</p>\n    \t\t\t\t<p>${e.comment}</p>\n    \t\t\t</div>\n    \t\t</div>\n      `:e.id%2==0&&(t.innerHTML=`\n\t\t\t\t<div class="col-xs-9 col-sm-9">\n\t\t\t\t\t<div class="review-inner review-gray review-arrow review-arrow-right">\n\t\t\t\t\t\t<p class="text-normal">${e.author}</p>\n\t\t\t\t\t\t<p>${e.comment}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-3 col-sm-2">\n\t\t\t\t\t<div class="review-user">\n\t\t\t\t\t\t<img src="images/users/${e.image}" alt="" class="img-responsive avatar">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n      `),t}createListOfComments(e){null!=e&&e.forEach((e=>{const t=this.buildCommentHtml(e);this.commentsContainer.append(t)}))}showComments(){}}({url:"/file/comments.json",commentsContainerClass:"comments-container",commentsItemClass:"comment-item"})})();